Package com.thoughtworks.jbehave.extensions.story.parser;

report = class < DailyReport
	def generate
	end
end.new

Helpers
	
	cr = 13;
	lf = 10;
	space = 32;
	eol = cr lf | cr | lf;
	and = 'And' | 'and';
	given = 'Given' | 'given';
	when = 'When' | 'when';
	then = 'Then' | 'then';
	as_a = 'As' space 'a';
	i_want = 'I' space 'want';
	so_that = 'So' space 'that';
	
Productions
	story =
		story_title
		narrative
		acceptance_criteria;
		
	story_title =
		line;
		
	narrative =
		as_a role
		i_want feature
		so_that benefit;
		
	role = line;
	feature = line;
	benefit = line;
		
	acceptance_criteria =
		scenario+;
		
	scenario =
		scenario_title
		context
		event
		outcome;
		
	scenario_title = line;
	
	context = given +;
	given =  ( Given | And ) line;
	
	event = When line;
	
	outcome = expectation+;
	
	expectation = ( Then | And ) line;

	line = 
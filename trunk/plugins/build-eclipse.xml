<project name="jbehave-eclipse" default="generate-scripts">
	<target name="generate-scripts">
	
	
	<property name="feature" value="org.jbehave.plugin.eclipse.feature"/>
	<property name="elements" value="feature@${feature}"/>
	
	
	 <mkdir dir="build"/>
	<eclipse.fetch elements="${elements}"		
			    buildDirectory="."	
			    configInfo="win32,win32,x86"
			    directory="directory.txt"
			    fetchTag="COPY"/>
			    
	
	<property name="featureAndPlugins" value="X"/>
	<property name="featureOnly" value="X"/>
	<property name="buildDirectory" value="build"/>
	<ant  antfile="fetch_${feature}.xml"/>		

	<xslt extension="properties" style="extract-feature-version.xslt" in="build/features/${feature}/feature.xml" out="version.xml"/>
	<xmlproperty file="version.xml"/>
	

	<eclipse.buildScript configInfo="win32,win32,x86 &amp; linux, motif, x86" elements="${elements}" buildDirectory="build" baseLocation="${eclipse.home}" /> 
	
	<ant dir="build/features/${feature}" antfile="build.xml" target="build.jars" /> 

	<ant dir="build/features/${feature}" antfile="build.xml" target="zip.distribution" /> 
  	<!--<ant antfile="build/assemble.${feature}.all.xml"/> -->
  

		<mkdir dir="build/site" /> 
 		<unzip dest="build/site" src="build/features/${feature}/${feature}_${feature.version}.bin.dist.zip"/>
			
		
		<xslt  style="site.xslt" in="version.xml" out="build/site/site.xml"/>
		
	</target>
  </project>


